"use strict";
const Node = require("../core/Node.js");
const CameraNode = require("./CameraNode.js");
const ModelNode = require("./ModelNode.js");
const OperatorNode = require("../math/OperatorNode.js");
const PositionNode = require("./PositionNode.js");
class ModelViewProjectionNode extends Node {
  constructor(position = new PositionNode()) {
    super("vec4");
    this.position = position;
    this._mvpMatrix = new OperatorNode("*", new CameraNode(CameraNode.PROJECTION), new ModelNode(ModelNode.VIEW));
  }
  generate(builder, output) {
    const type = this.getType(builder);
    const mvpSnipped = this._mvpMatrix.build(builder);
    const positionSnipped = this.position.build(builder, "vec3");
    return builder.format(`( ${mvpSnipped} * vec4( ${positionSnipped}, 1.0 ) )`, type, output);
  }
}
module.exports = ModelViewProjectionNode;
