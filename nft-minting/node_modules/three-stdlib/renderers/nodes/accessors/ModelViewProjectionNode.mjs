import Node from "../core/Node.mjs";
import CameraNode from "./CameraNode.mjs";
import ModelNode from "./ModelNode.mjs";
import OperatorNode from "../math/OperatorNode.mjs";
import PositionNode from "./PositionNode.mjs";
class ModelViewProjectionNode extends Node {
  constructor(position = new PositionNode()) {
    super("vec4");
    this.position = position;
    this._mvpMatrix = new OperatorNode("*", new CameraNode(CameraNode.PROJECTION), new ModelNode(ModelNode.VIEW));
  }
  generate(builder, output) {
    const type = this.getType(builder);
    const mvpSnipped = this._mvpMatrix.build(builder);
    const positionSnipped = this.position.build(builder, "vec3");
    return builder.format(`( ${mvpSnipped} * vec4( ${positionSnipped}, 1.0 ) )`, type, output);
  }
}
export {
  ModelViewProjectionNode as default
};
